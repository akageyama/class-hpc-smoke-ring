<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
   <meta name="description" content="渦輪の形成と伝播の3次元シミュレーション + 可視化">
    
    <meta name="author" content="" >
    <link rel="icon" href="../favicon.png">

    <title>slicedata.f90 &ndash; Smoke Ring</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/local.css" rel="stylesheet">
    
    <link  href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="../js/jquery-2.1.3.min.js"></script>
    <script src="../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">Smoke Ring </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
        
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
     aria-expanded="false">Contents <span class="caret"></span></a>
        <ul class="dropdown-menu">
          
              
            <li><a href="../lists/files.html">Source Files</a></li>
        
        
        
            <li><a href="../lists/modules.html">Modules</a></li>
        
            
                                
            <li><a href="../lists/procedures.html">Procedures</a></li>
        
               
            <li><a href="../lists/types.html">Derived Types</a></li>
        
        
            <li><a href="../program/main_m.html">Program</a></li>
      
            </ul>
            </li>


<li class="visible-xs hidden-sm visible-lg"><a href="../lists/files.html">Source Files</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/modules.html">Modules</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../lists/procedures.html">Procedures</a></li>

                             
<li class="visible-xs hidden-sm visible-lg"><a href="../lists/types.html">Derived Types</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../program/main_m.html">Program</a></li>

          </ul>
        
        <form action="../search.html" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
        </div>
<!--
        <button type="submit" class="btn btn-default">Submit</button>
-->
        </form>
        
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
    
  
  <div class="row">
    <h1>slicedata.f90
    <small>Source File</small>
    
    </h1>
    
<div class="row">
  <div class="col-lg-12">
<div class="well well-sm">
  <ul class="list-inline" style="margin-bottom:0px;display:inline">
     
     
     
     
    
    
     <li><i class="fa fa-list-ol"></i>
       <a data-toggle="tooltip"
    data-placement="bottom" data-html="true"
    title=" 5.2% of total for source files.">54 statements</a>
     </li> 
     
     
     
    <li><i class="fa fa-code"></i><a href="../src/slicedata.f90"> Source File</a></li>
     
     
  </ul>
  <ol class="breadcrumb in-well text-right">
  
    
  
     <li class="active">slicedata.f90</li>
  </ol>
</div>
</div>
</div>
<script>
  $(function () {
  $('[data-toggle="tooltip"]').tooltip()
  })
</script>

  </div>
  <div class="row">
    <div class="col-md-3 hidden-xs hidden-sm visible-md visible-lg">
    
<div id="sidebar">
  
<h3>Contents</h3>
 







<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#mods-0">Modules</a></h3></div>
  <div id="mods-0" class="panel-collapse collapse">
    <div class="list-group">
      
      <a class="list-group-item" href="../module/slicedata_m.html">slicedata_m</a>
      
    </div>
  </div>
</div>
















<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../sourcefile/slicedata.f90.html#src">slicedata.f90</a>
  </div>
</div>



</div>

    </div>
    <div class="col-md-9" id='text'>
      <hr>
      <br>
    
    <div class="panel panel-default">
      <div class="panel-heading">
  <h3 class="panel-title">This file depends on</h3>
      </div>
      <div class="panel-body">
  <div class="depgraph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: sourcefile~~slicedata.f90~~EfferentGraph Pages: 1 -->
<svg id="sourcefileslicedataf90EfferentGraph" width="568pt" height="227pt"
 viewBox="0.00 0.00 567.60 226.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="sourcefile~~slicedata.f90~~EfferentGraph" class="graph" transform="scale(1 1) rotate(0) translate(4 222.5)">
<title>sourcefile~~slicedata.f90~~EfferentGraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-222.5 563.6,-222.5 563.6,4 -4,4"/>
<!-- sourcefile~slicedata.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node1" class="node">
<title>sourcefile~slicedata.f90</title>
<polygon fill="none" stroke="black" points="559.57,-100.26 488.66,-100.26 488.66,-78.24 559.57,-78.24 559.57,-100.26"/>
<text text-anchor="middle" x="524.12" y="-86.1" font-family="Helvetica,sans-Serif" font-size="10.50">slicedata.f90</text>
</g>
<!-- sourcefile~field.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node2" class="node">
<title>sourcefile~field.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node2"><a xlink:href=".././sourcefile/field.f90.html" xlink:title="field.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="357.34,-218.26 303.34,-218.26 303.34,-196.24 357.34,-196.24 357.34,-218.26"/>
<text text-anchor="middle" x="330.34" y="-204.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">field.f90</text>
</a>
</g>
</g>
<!-- sourcefile~slicedata.f90&#45;&gt;sourcefile~field.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge1" class="edge">
<title>sourcefile~slicedata.f90&#45;&gt;sourcefile~field.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M505.08,-100.35C471.17,-121.22 397.77,-166.37 358.1,-190.79"/>
<polygon fill="#ff0000" stroke="#ff0000" points="356.15,-187.87 349.47,-196.09 359.82,-193.83 356.15,-187.87"/>
</g>
<!-- sourcefile~ut.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node3" class="node">
<title>sourcefile~ut.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node3"><a xlink:href=".././sourcefile/ut.f90.html" xlink:title="ut.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="164.46,-79.26 110.46,-79.26 110.46,-57.24 164.46,-57.24 164.46,-79.26"/>
<text text-anchor="middle" x="137.46" y="-65.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">ut.f90</text>
</a>
</g>
</g>
<!-- sourcefile~slicedata.f90&#45;&gt;sourcefile~ut.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge2" class="edge">
<title>sourcefile~slicedata.f90&#45;&gt;sourcefile~ut.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M231.72,-88.25C212.91,-84.4 192.01,-79.93 174.77,-76.2"/>
<polygon fill="#ff0000" stroke="#ff0000" points="175.07,-72.68 164.56,-73.98 173.59,-79.52 175.07,-72.68"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M423.17,-50.25C394.79,-44.86 387.99,-58.44 359.69,-64.25 303.86,-75.72 289.56,-99.69 233.72,-88.25"/>
</g>
<!-- sourcefile~solver.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node4" class="node">
<title>sourcefile~solver.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node4"><a xlink:href=".././sourcefile/solver.f90.html" xlink:title="solver.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="452.62,-100.26 395.72,-100.26 395.72,-78.24 452.62,-78.24 452.62,-100.26"/>
<text text-anchor="middle" x="424.17" y="-86.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">solver.f90</text>
</a>
</g>
</g>
<!-- sourcefile~slicedata.f90&#45;&gt;sourcefile~solver.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge3" class="edge">
<title>sourcefile~slicedata.f90&#45;&gt;sourcefile~solver.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M488.59,-89.25C480.21,-89.25 471.21,-89.25 462.7,-89.25"/>
<polygon fill="#ff0000" stroke="#ff0000" points="462.63,-85.75 452.63,-89.25 462.63,-92.75 462.63,-85.75"/>
</g>
<!-- sourcefile~debug.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node5" class="node">
<title>sourcefile~debug.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node5"><a xlink:href=".././sourcefile/debug.f90.html" xlink:title="debug.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="359.55,-22.26 301.13,-22.26 301.13,-0.24 359.55,-0.24 359.55,-22.26"/>
<text text-anchor="middle" x="330.34" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">debug.f90</text>
</a>
</g>
</g>
<!-- sourcefile~slicedata.f90&#45;&gt;sourcefile~debug.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge4" class="edge">
<title>sourcefile~slicedata.f90&#45;&gt;sourcefile~debug.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M423.17,-50.25C400.91,-46.02 377.43,-35.93 359.78,-27.08"/>
<polygon fill="#ff0000" stroke="#ff0000" points="361.11,-23.83 350.62,-22.33 357.89,-30.04 361.11,-23.83"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M502.05,-78.12C482.68,-68.56 452.86,-55.51 425.17,-50.25"/>
</g>
<!-- sourcefile~params.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node6" class="node">
<title>sourcefile~params.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node6"><a xlink:href=".././sourcefile/params.f90.html" xlink:title="params.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="264.75,-60.26 200.69,-60.26 200.69,-38.24 264.75,-38.24 264.75,-60.26"/>
<text text-anchor="middle" x="232.72" y="-46.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">params.f90</text>
</a>
</g>
</g>
<!-- sourcefile~slicedata.f90&#45;&gt;sourcefile~params.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge5" class="edge">
<title>sourcefile~slicedata.f90&#45;&gt;sourcefile~params.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M423.17,-50.25C383.07,-42.63 371.92,-54.63 331.34,-50.25"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M329.34,-50.25C311.57,-48.33 291.83,-47.85 274.93,-47.94"/>
<polygon fill="#ff0000" stroke="#ff0000" points="274.77,-44.44 264.81,-48.05 274.85,-51.44 274.77,-44.44"/>
</g>
<!-- sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node8" class="node">
<title>sourcefile~constants.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node8"><a xlink:href=".././sourcefile/constants.f90.html" xlink:title="constants.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="74.69,-79.26 -0.23,-79.26 -0.23,-57.24 74.69,-57.24 74.69,-79.26"/>
<text text-anchor="middle" x="37.23" y="-65.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">constants.f90</text>
</a>
</g>
</g>
<!-- sourcefile~field.f90&#45;&gt;sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge6" class="edge">
<title>sourcefile~field.f90&#45;&gt;sourcefile~constants.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M303.1,-204.54C283.74,-203.19 256.85,-202.7 233.72,-207.25"/>
</g>
<!-- sourcefile~grid.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node9" class="node">
<title>sourcefile~grid.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node9"><a xlink:href=".././sourcefile/grid.f90.html" xlink:title="grid.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="259.72,-179.26 205.72,-179.26 205.72,-157.24 259.72,-157.24 259.72,-179.26"/>
<text text-anchor="middle" x="232.72" y="-165.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">grid.f90</text>
</a>
</g>
</g>
<!-- sourcefile~field.f90&#45;&gt;sourcefile~grid.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge7" class="edge">
<title>sourcefile~field.f90&#45;&gt;sourcefile~grid.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M303.21,-196.59C292.77,-192.34 280.59,-187.37 269.37,-182.79"/>
<polygon fill="#ff0000" stroke="#ff0000" points="270.4,-179.43 259.82,-178.89 267.75,-185.91 270.4,-179.43"/>
</g>
<!-- sourcefile~ut.f90&#45;&gt;sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge8" class="edge">
<title>sourcefile~ut.f90&#45;&gt;sourcefile~constants.f90</title>
<path fill="none" stroke="#cbff00" stroke-dasharray="5,2" d="M110.39,-68.25C102.55,-68.25 93.69,-68.25 84.93,-68.25"/>
<polygon fill="#cbff00" stroke="#cbff00" points="84.77,-64.75 74.77,-68.25 84.77,-71.75 84.77,-64.75"/>
</g>
<!-- sourcefile~solver.f90&#45;&gt;sourcefile~field.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge9" class="edge">
<title>sourcefile~solver.f90&#45;&gt;sourcefile~field.f90</title>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M414.36,-100.56C398.62,-120.79 365.5,-163.35 346.19,-188.17"/>
<polygon fill="#00ff66" stroke="#00ff66" points="343.36,-186.1 339.98,-196.14 348.89,-190.4 343.36,-186.1"/>
</g>
<!-- sourcefile~solver.f90&#45;&gt;sourcefile~ut.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge11" class="edge">
<title>sourcefile~solver.f90&#45;&gt;sourcefile~ut.f90</title>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M329.34,-127.25C285.44,-140.63 278.68,-97.46 233.72,-88.25"/>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M399.84,-100.37C381.55,-108.73 355.27,-119.95 331.34,-127.25"/>
</g>
<!-- sourcefile~solver.f90&#45;&gt;sourcefile~debug.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge14" class="edge">
<title>sourcefile~solver.f90&#45;&gt;sourcefile~debug.f90</title>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M410.01,-78.07C395.01,-65.33 370.27,-44.32 352.54,-29.26"/>
<polygon fill="#00ff66" stroke="#00ff66" points="354.36,-26.21 344.47,-22.4 349.83,-31.55 354.36,-26.21"/>
</g>
<!-- sourcefile~solver.f90&#45;&gt;sourcefile~params.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge15" class="edge">
<title>sourcefile~solver.f90&#45;&gt;sourcefile~params.f90</title>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M405.74,-78.17C387.87,-67.72 358.89,-53.23 331.34,-50.25"/>
</g>
<!-- sourcefile~job.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_node7" class="node">
<title>sourcefile~job.f90</title>
<g id="a_sourcefile~~slicedata.f90~~EfferentGraph_node7"><a xlink:href=".././sourcefile/job.f90.html" xlink:title="job.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="259.72,-138.26 205.72,-138.26 205.72,-116.24 259.72,-116.24 259.72,-138.26"/>
<text text-anchor="middle" x="232.72" y="-124.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">job.f90</text>
</a>
</g>
</g>
<!-- sourcefile~solver.f90&#45;&gt;sourcefile~job.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge10" class="edge">
<title>sourcefile~solver.f90&#45;&gt;sourcefile~job.f90</title>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M329.34,-127.25C310.36,-133.04 288.25,-133.42 270.08,-132.18"/>
<polygon fill="#00ff66" stroke="#00ff66" points="270.16,-128.68 259.89,-131.3 269.55,-135.65 270.16,-128.68"/>
</g>
<!-- sourcefile~solver.f90&#45;&gt;sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge12" class="edge">
<title>sourcefile~solver.f90&#45;&gt;sourcefile~constants.f90</title>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M329.34,-127.25C276.34,-143.41 288.08,-196.54 233.72,-207.25"/>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M231.72,-207.25C191.05,-215.26 178.34,-218.54 138.46,-207.25"/>
</g>
<!-- sourcefile~solver.f90&#45;&gt;sourcefile~grid.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge13" class="edge">
<title>sourcefile~solver.f90&#45;&gt;sourcefile~grid.f90</title>
<path fill="none" stroke="#00ff66" stroke-dasharray="5,2" d="M329.34,-127.25C307.12,-134.02 283.1,-144.34 264.69,-152.92"/>
<polygon fill="#00ff66" stroke="#00ff66" points="263.15,-149.78 255.61,-157.23 266.15,-156.11 263.15,-149.78"/>
</g>
<!-- sourcefile~debug.f90&#45;&gt;sourcefile~ut.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge18" class="edge">
<title>sourcefile~debug.f90&#45;&gt;sourcefile~ut.f90</title>
<path fill="none" stroke="#0066ff" stroke-dasharray="5,2" d="M231.72,-10.25C202.52,-14.44 174.56,-34.75 157,-50.16"/>
<polygon fill="#0066ff" stroke="#0066ff" points="154.27,-47.91 149.25,-57.24 158.99,-53.07 154.27,-47.91"/>
</g>
<!-- sourcefile~debug.f90&#45;&gt;sourcefile~params.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge17" class="edge">
<title>sourcefile~debug.f90&#45;&gt;sourcefile~params.f90</title>
<path fill="none" stroke="#0066ff" stroke-dasharray="5,2" d="M301.42,-22.34C291.9,-26.13 281.09,-30.42 270.95,-34.45"/>
<polygon fill="#0066ff" stroke="#0066ff" points="269.5,-31.26 261.5,-38.21 272.09,-37.77 269.5,-31.26"/>
</g>
<!-- sourcefile~debug.f90&#45;&gt;sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge16" class="edge">
<title>sourcefile~debug.f90&#45;&gt;sourcefile~constants.f90</title>
<path fill="none" stroke="#0066ff" stroke-dasharray="5,2" d="M300.74,-8.68C281.66,-7.52 256.07,-7.04 233.72,-10.25"/>
<path fill="none" stroke="#0066ff" stroke-dasharray="5,2" d="M231.72,-10.25C190.69,-16.14 179.37,-3.59 138.46,-10.25"/>
<path fill="none" stroke="#0066ff" stroke-dasharray="5,2" d="M136.46,-10.25C106.11,-15.19 76.45,-35.46 57.8,-50.66"/>
<polygon fill="#0066ff" stroke="#0066ff" points="55.43,-48.08 50.05,-57.21 59.94,-53.43 55.43,-48.08"/>
</g>
<!-- sourcefile~params.f90&#45;&gt;sourcefile~ut.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge20" class="edge">
<title>sourcefile~params.f90&#45;&gt;sourcefile~ut.f90</title>
<path fill="none" stroke="#cc00ff" stroke-dasharray="5,2" d="M200.66,-55.58C192.29,-57.28 183.15,-59.15 174.52,-60.9"/>
<polygon fill="#cc00ff" stroke="#cc00ff" points="173.8,-57.48 164.7,-62.9 175.2,-64.34 173.8,-57.48"/>
</g>
<!-- sourcefile~params.f90&#45;&gt;sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge19" class="edge">
<title>sourcefile~params.f90&#45;&gt;sourcefile~constants.f90</title>
<path fill="none" stroke="#cc00ff" stroke-dasharray="5,2" d="M218.12,-38.07C200.48,-24.9 168.42,-5.37 138.46,-10.25"/>
</g>
<!-- sourcefile~job.f90&#45;&gt;sourcefile~ut.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge22" class="edge">
<title>sourcefile~job.f90&#45;&gt;sourcefile~ut.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M214.18,-116.15C200.24,-107.33 180.53,-94.86 164.71,-84.86"/>
<polygon fill="#ff0000" stroke="#ff0000" points="166.24,-81.69 155.92,-79.3 162.5,-87.6 166.24,-81.69"/>
</g>
<!-- sourcefile~job.f90&#45;&gt;sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge21" class="edge">
<title>sourcefile~job.f90&#45;&gt;sourcefile~constants.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M214.15,-138.3C209.58,-141.37 204.74,-144.81 200.46,-148.25 170.78,-172.05 175.06,-217.61 138.46,-207.25"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M136.46,-207.25C82.86,-192.08 54.94,-123.89 43.94,-88.98"/>
<polygon fill="#ff0000" stroke="#ff0000" points="47.26,-87.9 41.06,-79.31 40.56,-89.9 47.26,-87.9"/>
</g>
<!-- sourcefile~grid.f90&#45;&gt;sourcefile~ut.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge24" class="edge">
<title>sourcefile~grid.f90&#45;&gt;sourcefile~ut.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M213.14,-157.17C208.78,-154.2 204.29,-150.81 200.46,-147.25 181.05,-129.23 162.85,-104.79 151.25,-87.88"/>
<polygon fill="#0000ff" stroke="#0000ff" points="154.01,-85.71 145.53,-79.36 148.2,-89.61 154.01,-85.71"/>
</g>
<!-- sourcefile~grid.f90&#45;&gt;sourcefile~constants.f90 -->
<g id="sourcefile~~slicedata.f90~~EfferentGraph_edge23" class="edge">
<title>sourcefile~grid.f90&#45;&gt;sourcefile~constants.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M219.39,-179.27C201.86,-193.58 168.52,-215.76 138.46,-207.25"/>
</g>
</g>
</svg>
</div><div><a type="button" class="graph-help" data-toggle="modal" href="#graph-help-text">Help</a></div><div class="modal fade" id="graph-help-text" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="-graph-help-label">Graph Key</h4></div><div class="modal-body">
    <p>Nodes of different colours represent the following: </p>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: Graph Key Pages: 1 -->
<svg width="186pt" height="31pt"
 viewBox="0.00 0.00 186.41 30.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 26.5)">
<title>Graph Key</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-26.5 182.41,-26.5 182.41,4 -4,4"/>
<!-- Source File -->
<g id="node1" class="node">
<title>Source File</title>
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="65.16,-22.26 -0.05,-22.26 -0.05,-0.24 65.16,-0.24 65.16,-22.26"/>
<text text-anchor="middle" x="32.55" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">Source File</text>
</g>
<!-- This Page&#39;s Entity -->
<g id="node2" class="node">
<title>This Page&#39;s Entity</title>
<polygon fill="none" stroke="black" points="178.26,-22.26 82.84,-22.26 82.84,-0.24 178.26,-0.24 178.26,-22.26"/>
<text text-anchor="middle" x="130.55" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50">This Page&#39;s Entity</text>
</g>
</g>
</svg>

    
    <p>Solid arrows point from a file to a file which it depends on. A file
    is dependent upon another if the latter must be compiled before the former
    can be. Where possible, edges connecting nodes are given different colours to make them easier to distinguish in large graphs.
    </p>
    </div></div></div></div>
      </div>
    </div>
    
      
    <div class="panel panel-default">
      <div class="panel-heading">
  <h3 class="panel-title">Files dependent on this one</h3>
      </div>
      <div class="panel-body">
  <div class="depgraph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: sourcefile~~slicedata.f90~~AfferentGraph Pages: 1 -->
<svg id="sourcefileslicedataf90AfferentGraph" width="169pt" height="31pt"
 viewBox="0.00 0.00 168.95 30.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="sourcefile~~slicedata.f90~~AfferentGraph" class="graph" transform="scale(1 1) rotate(0) translate(4 26.5)">
<title>sourcefile~~slicedata.f90~~AfferentGraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-26.5 164.95,-26.5 164.95,4 -4,4"/>
<!-- sourcefile~slicedata.f90 -->
<g id="sourcefile~~slicedata.f90~~AfferentGraph_node1" class="node">
<title>sourcefile~slicedata.f90</title>
<polygon fill="none" stroke="black" points="70.93,-22.26 0.02,-22.26 0.02,-0.24 70.93,-0.24 70.93,-22.26"/>
<text text-anchor="middle" x="35.48" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50">slicedata.f90</text>
</g>
<!-- sourcefile~main.f90 -->
<g id="sourcefile~~slicedata.f90~~AfferentGraph_node2" class="node">
<title>sourcefile~main.f90</title>
<g id="a_sourcefile~~slicedata.f90~~AfferentGraph_node2"><a xlink:href=".././sourcefile/main.f90.html" xlink:title="main.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="160.95,-22.26 106.95,-22.26 106.95,-0.24 160.95,-0.24 160.95,-22.26"/>
<text text-anchor="middle" x="133.95" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">main.f90</text>
</a>
</g>
</g>
<!-- sourcefile~main.f90&#45;&gt;sourcefile~slicedata.f90 -->
<g id="sourcefile~~slicedata.f90~~AfferentGraph_edge1" class="edge">
<title>sourcefile~main.f90&#45;&gt;sourcefile~slicedata.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M106.85,-11.25C98.9,-11.25 89.94,-11.25 81.14,-11.25"/>
<polygon fill="#ff0000" stroke="#ff0000" points="80.95,-7.75 70.95,-11.25 80.95,-14.75 80.95,-7.75"/>
</g>
</g>
</svg>
</div><div><a type="button" class="graph-help" data-toggle="modal" href="#graph-help-text">Help</a></div><div class="modal fade" id="graph-help-text" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="-graph-help-label">Graph Key</h4></div><div class="modal-body">
    <p>Nodes of different colours represent the following: </p>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: Graph Key Pages: 1 -->
<svg width="186pt" height="31pt"
 viewBox="0.00 0.00 186.41 30.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 26.5)">
<title>Graph Key</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-26.5 182.41,-26.5 182.41,4 -4,4"/>
<!-- Source File -->
<g id="node1" class="node">
<title>Source File</title>
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="65.16,-22.26 -0.05,-22.26 -0.05,-0.24 65.16,-0.24 65.16,-22.26"/>
<text text-anchor="middle" x="32.55" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="white">Source File</text>
</g>
<!-- This Page&#39;s Entity -->
<g id="node2" class="node">
<title>This Page&#39;s Entity</title>
<polygon fill="none" stroke="black" points="178.26,-22.26 82.84,-22.26 82.84,-0.24 178.26,-0.24 178.26,-22.26"/>
<text text-anchor="middle" x="130.55" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50">This Page&#39;s Entity</text>
</g>
</g>
</svg>

    
    <p>Solid arrows point from a file to a file which it depends on. A file
    is dependent upon another if the latter must be compiled before the former
    can be. Where possible, edges connecting nodes are given different colours to make them easier to distinguish in large graphs.
    </p>
    </div></div></div></div>
      </div>
    </div>
      
      <br>

    <section class="visible-xs visible-sm hidden-md">
      
<h3>Contents</h3>
 







<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#mods-1">Modules</a></h3></div>
  <div id="mods-1" class="panel-collapse collapse">
    <div class="list-group">
      
      <a class="list-group-item" href="../module/slicedata_m.html">slicedata_m</a>
      
    </div>
  </div>
</div>
















<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../sourcefile/slicedata.f90.html#src">slicedata.f90</a>
  </div>
</div>



    </section>
    <br class="visible-xs visible-sm hidden-md">

    <section>
      <h2><span class="anchor" id="src"></span>Source Code</h2>
    <div class="hl"><pre><span></span><a name="ln-1"></a><span class="c">!*******************************************************************</span>
<a name="ln-2"></a><span class="c">!&gt; author: Akira Kageyama</span>
<a name="ln-3"></a><span class="c">!  license: MIT</span>
<a name="ln-4"></a><span class="c">!  date: 2020.01.22</span>
<a name="ln-5"></a><span class="c">!</span>
<a name="ln-6"></a><span class="c">!  断面データの作成とディスクへの出力</span>
<a name="ln-7"></a><span class="c">!</span>
<a name="ln-8"></a><span class="c">!  書き出されたデータはslice_grapherディレクトリにあるプログラムで</span>
<a name="ln-9"></a><span class="c">!  可視化される。</span>
<a name="ln-10"></a><span class="c">!</span>
<a name="ln-11"></a><span class="c">!  @note </span>
<a name="ln-12"></a><span class="c">!    ここで書き出す断面データは単精度浮動小数点数である。可視化には</span>
<a name="ln-13"></a><span class="c">!    単精度で十分である。</span>
<a name="ln-14"></a><span class="c">!</span>
<a name="ln-15"></a><span class="c">!  @note</span>
<a name="ln-16"></a><span class="c">!    サブルーチンmake_single_precision_fieldでは</span>
<a name="ln-17"></a><span class="c">!    fieldモジュールで定義されたcurlを計算するルーチンを呼び出している。</span>
<a name="ln-18"></a><span class="c">!    ここで.curl.などの演算子を使うと記述が簡潔になるが、</span>
<a name="ln-19"></a><span class="c">!    現在はこれをコメントアウトしている。Fortranコンパイラが</span>
<a name="ln-20"></a><span class="c">!    自己定義演算子を問題なく使えるのであれば</span>
<a name="ln-21"></a><span class="c">!    .curl.などを使うようにコメントを外せばよい。</span>
<a name="ln-22"></a><span class="c">!    詳しくはfieldモジュールを見よ。</span>
<a name="ln-23"></a>
<a name="ln-24"></a><span class="k">module </span><span class="n">slicedata_m</span>
<a name="ln-25"></a>  <span class="k">use </span><span class="n">ut_m</span>      <span class="c">! ユーティリティ。constantsモジュールは間接的にuseされる</span>
<a name="ln-26"></a>  <span class="k">use </span><span class="n">field_m</span>   <span class="c">! 流体場</span>
<a name="ln-27"></a>  <span class="k">use </span><span class="n">params_m</span>  <span class="c">! パラメータ</span>
<a name="ln-28"></a>  <span class="k">use </span><span class="n">debug_m</span>   <span class="c">! デバッグ関係</span>
<a name="ln-29"></a>  <span class="k">use </span><span class="n">solver_m</span>  <span class="c">! ナビエ・ストークス方程式ソルバ</span>
<a name="ln-30"></a>  <span class="k">implicit none</span> <span class="c">! 暗黙の型宣言無効化。必須</span>
<a name="ln-31"></a>  <span class="k">private</span> <span class="c">! このモジュール内の変数・ルーチン等はデフォルトで非公開</span>
<a name="ln-32"></a>  <span class="k">public</span> <span class="kd">::</span> <span class="n">slicedata__initialize</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-33"></a>            <span class="n">slicedata__write</span>
<a name="ln-34"></a>
<a name="ln-35"></a>  <span class="c">! 2次元単精度実数配列</span>
<a name="ln-36"></a>  <span class="kt">real</span><span class="p">(</span><span class="n">SR</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(:,:),</span> <span class="k">allocatable</span> <span class="kd">::</span> <span class="n">Slice_vx</span>  <span class="c">! 速度のx成分</span>
<a name="ln-37"></a>  <span class="kt">real</span><span class="p">(</span><span class="n">SR</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(:,:),</span> <span class="k">allocatable</span> <span class="kd">::</span> <span class="n">Slice_vy</span>  <span class="c">! 速度のy成分</span>
<a name="ln-38"></a>  <span class="kt">real</span><span class="p">(</span><span class="n">SR</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(:,:),</span> <span class="k">allocatable</span> <span class="kd">::</span> <span class="n">Slice_vz</span>  <span class="c">! 速度のz成分</span>
<a name="ln-39"></a>  <span class="kt">real</span><span class="p">(</span><span class="n">SR</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(:,:),</span> <span class="k">allocatable</span> <span class="kd">::</span> <span class="n">Slice_ps</span>  <span class="c">! 圧力</span>
<a name="ln-40"></a>  <span class="kt">real</span><span class="p">(</span><span class="n">SR</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(:,:),</span> <span class="k">allocatable</span> <span class="kd">::</span> <span class="n">Slice_en</span>  <span class="c">! エンストロフィ</span>
<a name="ln-41"></a>                             <span class="c">! Enstrophy とは渦度の二乗</span>
<a name="ln-42"></a>                             <span class="c">! 渦度は速度のcurl</span>
<a name="ln-43"></a>
<a name="ln-44"></a>  <span class="kt">logical</span><span class="p">,</span> <span class="k">save</span> <span class="kd">::</span> <span class="n">Initialize_done</span> <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>    <span class="c">! モジュール初期化済か否か</span>
<a name="ln-45"></a>  <span class="kt">integer</span><span class="p">(</span><span class="n">SI</span><span class="p">),</span> <span class="k">parameter</span> <span class="kd">::</span> <span class="n">FILE_SLICEDATA</span> <span class="o">=</span> <span class="mi">20</span> <span class="c">! 断面データ出力ファイル番号</span>
<a name="ln-46"></a>
<a name="ln-47"></a>
<a name="ln-48"></a><span class="k">contains</span>
<a name="ln-49"></a>
<a name="ln-50"></a>
<a name="ln-51"></a><span class="k">  subroutine </span><span class="n">make_single_precision_field</span><span class="p">(</span><span class="n">vel</span><span class="p">,</span><span class="n">ps</span><span class="p">)</span>
<a name="ln-52"></a>    <span class="c">!! シミュレーションで計算した速度場と圧力場</span>
<a name="ln-53"></a>    <span class="c">!! のx-z平面での断面データを求める。</span>
<a name="ln-54"></a>    <span class="c">!! その際、倍精度実数から単精度実数に型変換する。</span>
<a name="ln-55"></a>    <span class="c">!!</span>
<a name="ln-56"></a>    <span class="c">!! ここではx-z平面で書き出しているが、</span>
<a name="ln-57"></a>    <span class="c">!! x-y平面での断面データなど、同様にとることが可能である。</span>
<a name="ln-58"></a>    <span class="c">!!</span>
<a name="ln-59"></a>    <span class="c">!! サブルーチンmake_single_precision_fieldでは</span>
<a name="ln-60"></a>    <span class="c">!! x-z面に平行な断面をとっている。その際、</span>
<a name="ln-61"></a>    <span class="c">!! その断面位置は</span>
<a name="ln-62"></a>    <span class="c">!!     j = slice_j = NY / 2</span>
<a name="ln-63"></a>    <span class="c">!! としている。NYが偶数の時、</span>
<a name="ln-64"></a>    <span class="c">!! この断面は厳密に言えばy=0にはなっていない。</span>
<a name="ln-65"></a>    <span class="c">!! なぜならgridモジュールできめたy方向の格子点の</span>
<a name="ln-66"></a>    <span class="c">!! 定義によればy=0の面はj=NY/2とj=NY/2+1の2つの面</span>
<a name="ln-67"></a>    <span class="c">!! の中間にあるからである。正確にy=0面上での可視化</span>
<a name="ln-68"></a>    <span class="c">!! をしたいのであればこの2つの面上でのデータ</span>
<a name="ln-69"></a>    <span class="c">!! の平均値をディスクに書き出すべきである。</span>
<a name="ln-70"></a>    <span class="c">!! </span>
<a name="ln-71"></a>    <span class="c">!! [バグ]</span>
<a name="ln-72"></a>    <span class="c">!!   NYが奇数のときにちょうどy=0面に対応するのは</span>
<a name="ln-73"></a>    <span class="c">!!     j = slice_j = NY / 2 + 1 </span>
<a name="ln-74"></a>    <span class="c">!!   である。偶数のときにもこれでよい。</span>
<a name="ln-75"></a>    <span class="k">type</span><span class="p">(</span><span class="n">field__vector3d_t</span><span class="p">),</span>       <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="n">vel</span> <span class="c">!! 速度場（3D）</span>
<a name="ln-76"></a>    <span class="kt">real</span><span class="p">(</span><span class="n">DR</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(</span><span class="n">NX</span><span class="p">,</span><span class="n">NY</span><span class="p">,</span><span class="n">NZ</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ps</span>  <span class="c">!! 圧力場（3D）</span>
<a name="ln-77"></a>
<a name="ln-78"></a>    <span class="kt">integer</span><span class="p">(</span><span class="n">SI</span><span class="p">)</span> <span class="kd">::</span> <span class="n">slice_j</span> <span class="o">=</span> <span class="n">NY</span> <span class="o">/</span> <span class="mi">2</span>    <span class="c">! 断面をとるy座標の格子点位置</span>
<a name="ln-79"></a>
<a name="ln-80"></a>    <span class="k">type</span><span class="p">(</span><span class="n">field__vector3d_t</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">vor</span>       <span class="c">! vorticity、渦度</span>
<a name="ln-81"></a>    <span class="kt">real</span><span class="p">(</span><span class="n">DR</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(</span><span class="n">NX</span><span class="p">,</span><span class="n">NY</span><span class="p">,</span><span class="n">NZ</span><span class="p">)</span> <span class="kd">::</span> <span class="n">enstrophy</span> <span class="c">! 渦度の2乗</span>
<a name="ln-82"></a>
<a name="ln-83"></a><span class="c">!&gt;        vor = .curl.vel</span>
<a name="ln-84"></a><span class="c">!&gt;  enstrophy = vor.dot.vor</span>
<a name="ln-85"></a>          <span class="n">vor</span> <span class="o">=</span> <span class="n">operator_curl</span><span class="p">(</span><span class="n">vel</span><span class="p">)</span>
<a name="ln-86"></a>    <span class="n">enstrophy</span> <span class="o">=</span> <span class="n">operator_dot_product</span><span class="p">(</span><span class="n">vor</span><span class="p">,</span><span class="n">vor</span><span class="p">)</span>
<a name="ln-87"></a>
<a name="ln-88"></a>    <span class="n">Slice_vx</span> <span class="o">=</span> <span class="kt">real</span><span class="p">(</span>    <span class="n">vel</span><span class="p">%</span><span class="n">x</span><span class="p">(:,</span><span class="n">slice_j</span><span class="p">,:),</span><span class="n">SR</span><span class="p">)</span>
<a name="ln-89"></a>    <span class="n">Slice_vy</span> <span class="o">=</span> <span class="kt">real</span><span class="p">(</span>    <span class="n">vel</span><span class="p">%</span><span class="n">y</span><span class="p">(:,</span><span class="n">slice_j</span><span class="p">,:),</span><span class="n">SR</span><span class="p">)</span>
<a name="ln-90"></a>    <span class="n">Slice_vz</span> <span class="o">=</span> <span class="kt">real</span><span class="p">(</span>    <span class="n">vel</span><span class="p">%</span><span class="n">z</span><span class="p">(:,</span><span class="n">slice_j</span><span class="p">,:),</span><span class="n">SR</span><span class="p">)</span>
<a name="ln-91"></a>    <span class="n">Slice_ps</span> <span class="o">=</span> <span class="kt">real</span><span class="p">(</span>       <span class="n">ps</span><span class="p">(:,</span><span class="n">slice_j</span><span class="p">,:),</span><span class="n">SR</span><span class="p">)</span>
<a name="ln-92"></a>    <span class="n">Slice_en</span> <span class="o">=</span> <span class="kt">real</span><span class="p">(</span><span class="n">enstrophy</span><span class="p">(:,</span><span class="n">slice_j</span><span class="p">,:),</span><span class="n">SR</span><span class="p">)</span>
<a name="ln-93"></a>
<a name="ln-94"></a>    <span class="k">call </span><span class="n">debug__print</span><span class="p">(</span><span class="s1">&#39;called slicedata/make_single_precision_field.&#39;</span><span class="p">)</span>
<a name="ln-95"></a>      <span class="c">! デバッグモードがonの時には毎回メッセージを標準出力に</span>
<a name="ln-96"></a>      <span class="c">! 書き出す。コードが完成し、product runの段階に入ったら</span>
<a name="ln-97"></a>      <span class="c">! デバッグモードをoffにすれば、書き出しは抑制される。</span>
<a name="ln-98"></a>      <span class="c">! この行をコメントアウトする必要はない。</span>
<a name="ln-99"></a>  <span class="k">end subroutine </span><span class="n">make_single_precision_field</span>
<a name="ln-100"></a>
<a name="ln-101"></a>
<a name="ln-102"></a><span class="c">!</span>
<a name="ln-103"></a><span class="c">! Private  これより上が非公開の関数・ルーチン</span>
<a name="ln-104"></a><span class="c">!===================================================</span>
<a name="ln-105"></a><span class="c">! Public   これより下が公開する関数・ルーチン</span>
<a name="ln-106"></a><span class="c">!</span>
<a name="ln-107"></a>
<a name="ln-108"></a>
<a name="ln-109"></a>  <span class="k">subroutine </span><span class="n">slicedata__initialize</span>
<a name="ln-110"></a>    <span class="c">!! このモジュールの初期化</span>
<a name="ln-111"></a>    <span class="c">!!</span>
<a name="ln-112"></a>    <span class="c">!! 流体の場（fluid）の配列は決め打ち（つまりallocatableにしない）で</span>
<a name="ln-113"></a>    <span class="c">!! 最初から3次元配列を確保している一方、ここではSlice_??配列を</span>
<a name="ln-114"></a>    <span class="c">!! アロケータブルにしているのは、このslicedataモジュールは</span>
<a name="ln-115"></a>    <span class="c">!! シミュレーションには必須ではないためである。</span>
<a name="ln-116"></a>    <span class="c">!! 場合によってはこのslicedataモジュールを使わずに</span>
<a name="ln-117"></a>    <span class="c">!! シュミレーションすることも考えられる。</span>
<a name="ln-118"></a>    <span class="c">!! 例えば断面ではなく三次元の可視化をする時など。</span>
<a name="ln-119"></a>    <span class="c">!! そのような場合は、このslicedataモジュールは実際には</span>
<a name="ln-120"></a>    <span class="c">!! 呼びたさないであろう。そのような時に備えて以下のように</span>
<a name="ln-121"></a>    <span class="c">!! allocatableにしておけばメモリーを無駄遣いしない。</span>
<a name="ln-122"></a>    <span class="k">allocate</span><span class="p">(</span><span class="n">Slice_vx</span><span class="p">(</span><span class="n">NX</span><span class="p">,</span><span class="n">NZ</span><span class="p">),</span>   <span class="p">&amp;</span>
<a name="ln-123"></a>             <span class="n">Slice_vy</span><span class="p">(</span><span class="n">NX</span><span class="p">,</span><span class="n">NZ</span><span class="p">),</span>   <span class="p">&amp;</span>
<a name="ln-124"></a>             <span class="n">Slice_vz</span><span class="p">(</span><span class="n">NX</span><span class="p">,</span><span class="n">NZ</span><span class="p">),</span>   <span class="p">&amp;</span>
<a name="ln-125"></a>             <span class="n">Slice_ps</span><span class="p">(</span><span class="n">NX</span><span class="p">,</span><span class="n">NZ</span><span class="p">),</span>   <span class="p">&amp;</span>
<a name="ln-126"></a>             <span class="n">Slice_en</span><span class="p">(</span><span class="n">NX</span><span class="p">,</span><span class="n">NZ</span><span class="p">))</span>
<a name="ln-127"></a>
<a name="ln-128"></a>    <span class="k">call </span><span class="n">debug__print</span><span class="p">(</span><span class="s1">&#39;Slice data allocated.&#39;</span><span class="p">)</span>
<a name="ln-129"></a>      <span class="c">! デバッグモードがonの時には毎回メッセージを標準出力に</span>
<a name="ln-130"></a>      <span class="c">! 書き出す。コードが完成し、product runの段階に入ったら</span>
<a name="ln-131"></a>      <span class="c">! デバッグモードをoffにすれば、書き出しは抑制される。</span>
<a name="ln-132"></a>      <span class="c">! この行をコメントアウトする必要はない。</span>
<a name="ln-133"></a>
<a name="ln-134"></a>    <span class="k">open</span><span class="p">(</span><span class="n">FILE_SLICEDATA</span><span class="p">,</span>                                <span class="p">&amp;</span>
<a name="ln-135"></a>         <span class="k">file</span><span class="o">=</span><span class="nb">trim</span><span class="p">(</span><span class="n">params__get_string</span><span class="p">(</span><span class="s1">&#39;Slicedata_tag&#39;</span><span class="p">)),</span>  <span class="p">&amp;</span>
<a name="ln-136"></a>         <span class="n">form</span><span class="o">=</span><span class="s1">&#39;unformatted&#39;</span><span class="p">)</span>
<a name="ln-137"></a>      <span class="c">! 断面データを書き出すファイルをオープン</span>
<a name="ln-138"></a>
<a name="ln-139"></a>    <span class="n">Initialize_done</span> <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>  <span class="c">! 初期化終了のフラグをonにする</span>
<a name="ln-140"></a>
<a name="ln-141"></a>    <span class="k">call </span><span class="n">debug__print</span><span class="p">(</span><span class="s1">&#39;called slicedata__initlilize&#39;</span><span class="p">)</span>
<a name="ln-142"></a>  <span class="k">end subroutine </span><span class="n">slicedata__initialize</span>
<a name="ln-143"></a>
<a name="ln-144"></a>
<a name="ln-145"></a>  <span class="k">subroutine </span><span class="n">slicedata__write</span><span class="p">(</span><span class="n">nloop</span><span class="p">,</span><span class="nb">time</span><span class="p">,</span><span class="n">fluid</span><span class="p">)</span>
<a name="ln-146"></a>    <span class="c">!! 断面データのディスクへの書き出し</span>
<a name="ln-147"></a>    <span class="kt">integer</span><span class="p">(</span><span class="n">DI</span><span class="p">),</span>          <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="n">nloop</span> <span class="c">!! 現在のループカウンタ</span>
<a name="ln-148"></a>    <span class="kt">real</span><span class="p">(</span><span class="n">DR</span><span class="p">),</span>             <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="nb">time</span>  <span class="c">!! 現在の時刻</span>
<a name="ln-149"></a>    <span class="k">type</span><span class="p">(</span><span class="n">field__fluid_t</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="n">fluid</span> <span class="c">!! 現在の流体データ</span>
<a name="ln-150"></a>
<a name="ln-151"></a>    <span class="k">type</span><span class="p">(</span><span class="n">field__vector3d_t</span><span class="p">)</span> <span class="kd">::</span> <span class="n">vel</span> 
<a name="ln-152"></a>      <span class="c">! 流れ速度ベクトル場。いまはナビエ・ストークス方程式の</span>
<a name="ln-153"></a>      <span class="c">! 基本変数を質量フラックスにしているのでこの流れ速度</span>
<a name="ln-154"></a>      <span class="c">! ベクトル場は基本変数ではなく、基本変数から計算される</span>
<a name="ln-155"></a>      <span class="c">! 二次的な量である。</span>
<a name="ln-156"></a>
<a name="ln-157"></a>    <span class="k">if</span> <span class="p">(</span> <span class="n">params__get_integer</span><span class="p">(</span><span class="s1">&#39;Slicedata_nskip&#39;</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="k">return</span>
<a name="ln-158"></a>                                      <span class="c">! 何らかの理由で断面データの</span>
<a name="ln-159"></a>                                      <span class="c">! 出力をしないときには</span>
<a name="ln-160"></a>                                      <span class="c">! parameter中のSlicedata_nskip</span>
<a name="ln-161"></a>                                      <span class="c">! の値を負にする。</span>
<a name="ln-162"></a>
<a name="ln-163"></a>    <span class="k">if</span> <span class="p">(</span> <span class="nb">mod</span><span class="p">(</span><span class="n">nloop</span><span class="p">,</span><span class="n">params__get_integer</span><span class="p">(</span><span class="s1">&#39;Slicedata_nskip&#39;</span><span class="p">))</span> <span class="o">/=</span> <span class="mi">0</span> <span class="p">)</span> <span class="k">return</span>
<a name="ln-164"></a>                                      <span class="c">! parameter中のSlicedata_nskip</span>
<a name="ln-165"></a>                                      <span class="c">! の値が例えば10の時には</span>
<a name="ln-166"></a>                                      <span class="c">! 10ステップおきに断面データを計算し、</span>
<a name="ln-167"></a>                                      <span class="c">! ディスクに書き出す。</span>
<a name="ln-168"></a>
<a name="ln-169"></a>    <span class="k">call </span><span class="n">ut__assert</span><span class="p">(</span><span class="n">Initialize_done</span><span class="p">,</span><span class="s2">&quot;&lt;slicedata__write&gt; Forgot init?&quot;</span><span class="p">)</span>
<a name="ln-170"></a>                                      <span class="c">! モジュールの初期化終了確認</span>
<a name="ln-171"></a>
<a name="ln-172"></a>    <span class="k">call </span><span class="n">solver__get_subfield</span><span class="p">(</span><span class="n">fluid</span><span class="p">,</span><span class="n">vel</span><span class="p">)</span>
<a name="ln-173"></a>                                      <span class="c">! 流体の基本変数から速度場を求める</span>
<a name="ln-174"></a>
<a name="ln-175"></a>    <span class="k">call </span><span class="n">make_single_precision_field</span><span class="p">(</span><span class="n">vel</span><span class="p">,</span><span class="n">fluid</span><span class="p">%</span><span class="n">pressure</span><span class="p">)</span>
<a name="ln-176"></a>                                      <span class="c">! 断面データを作成</span>
<a name="ln-177"></a>
<a name="ln-178"></a>    <span class="k">write</span><span class="p">(</span><span class="n">FILE_SLICEDATA</span><span class="p">)</span> <span class="n">nloop</span><span class="p">,</span> <span class="kt">real</span><span class="p">(</span><span class="nb">time</span><span class="p">,</span><span class="n">SR</span><span class="p">),</span>  <span class="p">&amp;</span>
<a name="ln-179"></a>                          <span class="n">Slice_vx</span><span class="p">,</span> <span class="n">Slice_vy</span><span class="p">,</span> <span class="n">Slice_vz</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-180"></a>                          <span class="n">Slice_ps</span><span class="p">,</span> <span class="n">Slice_en</span>
<a name="ln-181"></a>                                      <span class="c">! ディスクへの書き出し</span>
<a name="ln-182"></a>                                      <span class="c">! 時刻も単精度に変換している</span>
<a name="ln-183"></a>
<a name="ln-184"></a>    <span class="k">call </span><span class="n">ut__message</span><span class="p">(</span><span class="s1">&#39;#slice data saved at &#39;</span><span class="p">,</span> <span class="n">nloop</span><span class="p">,</span> <span class="nb">time</span><span class="p">)</span>
<a name="ln-185"></a>                                      <span class="c">! ここはデバッグモードがoffでも</span>
<a name="ln-186"></a>                                      <span class="c">! 書き出すようにしている。</span>
<a name="ln-187"></a>                                      <span class="c">! 断面データはそれほど頻繁に</span>
<a name="ln-188"></a>                                      <span class="c">! 書き出さない（この行まで到達しない）</span>
<a name="ln-189"></a>                                      <span class="c">! のでこの出力がたくさんあって</span>
<a name="ln-190"></a>                                      <span class="c">! 邪魔になることはあまりないと</span>
<a name="ln-191"></a>                                      <span class="c">! 予想できるためである。</span>
<a name="ln-192"></a>    <span class="k">call </span><span class="n">debug__print</span><span class="p">(</span><span class="s1">&#39;called slicedata__write.&#39;</span><span class="p">)</span>
<a name="ln-193"></a>  <span class="k">end subroutine </span><span class="n">slicedata__write</span>
<a name="ln-194"></a>
<a name="ln-195"></a><span class="k">end module </span><span class="n">slicedata_m</span>
</pre></div>

    </section>
    </div>
  </div>

  
    <hr>    
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-4"><p>&copy; 2020 
                                          </p></div>
        <div class="col-xs-6 col-md-4 col-md-push-4">
          <p class="text-right">
            Documentation generated by 
            <a href="https://github.com/cmacmackin/ford">FORD</a>
             on 2020-01-23 09:25  
          </p>
        </div>
        <div class="col-xs-12 col-md-4 col-md-pull-4"><p class="text-center"> Smoke Ring was developed by </p></div>
      </div>
      <br>
      </div> <!-- /container -->    
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
      });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    
    <script src="../tipuesearch/tipuesearch_content.js"></script>
    <script src="../tipuesearch/tipuesearch_set.js"></script>
    <script src="../tipuesearch/tipuesearch.js"></script>
    
    
  </body>
</html>